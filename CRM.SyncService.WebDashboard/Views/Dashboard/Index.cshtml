@{
    ViewData["Title"] = "Dashboard";
    var data = Model;

    var services = new List<dynamic>
    {
        new { Name = "Tên Miền", Count = 234, Color = "info", Icon = "bi-globe" },
        new { Name = "Hosting", Count = 89, Color = "success", Icon = "bi-hdd-fill" },
        new { Name = "VPS", Count = 45, Color = "danger", Icon = "bi-server" }
    };

    var recentOrdersDetailed = new List<dynamic>
    {
        new { Code = "ORD-001", Customer = "Nguyễn Văn A", Amount = 2500000, Status = "Chờ xử lý" },
        new { Code = "ORD-002", Customer = "Trần Thị B", Amount = 1800000, Status = "Hoàn thành" },
        new { Code = "ORD-003", Customer = "Lê Văn C", Amount = 3200000, Status = "Đang xử lý" }
    };
}

<link href="~/css/dashboard.css" rel="stylesheet" />

<div class="px-0 pt-0 pb-4">
    <h1 class="la-dashboard-title">
        <i class="bi bi-speedometer2 me-2" style="color: var(--la-gold);"></i>
        Tổng quan CRM
    </h1>

    <!-- Stats Cards -->
    <div class="la-row la-row-stats">
        <div class="la-stat-card">
            <div class="la-stat-content">
                <div>
                    <div class="la-stat-label">Khách hàng</div>
                    <div class="la-stat-number">@data.TotalCustomers</div>
                </div>
                <div class="la-stat-icon">
                    <i class="bi bi-people-fill"></i>
                </div>
            </div>
        </div>

        <div class="la-stat-card">
            <div class="la-stat-content">
                <div>
                    <div class="la-stat-label">Đơn hàng tháng</div>
                    <div class="la-stat-number">@data.MonthlyOrders</div>
                </div>
                <div class="la-stat-icon">
                    <i class="bi bi-cart-fill"></i>
                </div>
            </div>
        </div>

        <div class="la-stat-card">
            <div class="la-stat-content">
                <div>
                    <div class="la-stat-label">Hợp đồng</div>
                    <div class="la-stat-number">@data.ActiveContracts</div>
                </div>
                <div class="la-stat-icon">
                    <i class="bi bi-file-earmark-text-fill"></i>
                </div>
            </div>
        </div>

        <div class="la-stat-card">
            <div class="la-stat-content">
                <div>
                    <div class="la-stat-label">Doanh thu tháng</div>
                    <div class="la-stat-number" style="color: var(--la-gold);">@data.MonthlyRevenue.ToString("N0") ₫</div>
                </div>
                <div class="la-stat-icon">
                    <i class="bi bi-currency-dollar"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Cards -->
    <div class="la-row la-row-content">
        <!-- Services Card -->
        <div class="la-card">
            <div class="la-card-title">
                🛠️ Dịch vụ
            </div>
            <div class="la-card-subtitle">Tổng quan các dịch vụ đang cung cấp</div>

            @foreach (var svc in services)
            {
                <div class="la-service-item">
                    <div class="la-service-icon @svc.Color">
                        <i class="bi @svc.Icon"></i>
                    </div>
                    <div class="la-service-info">
                        <h6>@svc.Name</h6>
                        <small>@svc.Count dịch vụ</small>
                    </div>
                </div>
            }
        </div>

        <!-- Recent Orders Card -->
        <div class="la-card">
            <div class="la-card-title">
                📦 Đơn hàng gần đây
            </div>
            <div class="la-card-subtitle">Các đơn hàng mới nhất</div>

            @foreach (var order in recentOrdersDetailed)
            {
                var badgeClass = order.Status == "Hoàn thành"
                ? "la-badge-success"
                : order.Status == "Đang xử lý"
                ? "la-badge-warning"
                : "la-badge-info";

                <div class="la-order-item">
                    <div>
                        <div class="la-order-code">@order.Code</div>
                        <div class="la-order-customer">@order.Customer</div>
                    </div>
                    <div style="text-align: right;">
                        <div class="la-order-amount">@order.Amount.ToString("N0") ₫</div>
                        <span class="la-badge @badgeClass">@order.Status</span>
                    </div>
                </div>
            }
        </div>

        <!-- Quick Actions Card -->
        <div class="la-card">
            <div class="la-card-title">
                ⚡ Thao tác nhanh
            </div>
            <div class="la-card-subtitle">Các chức năng thường dùng</div>

            <div class="la-action-item">
                <i class="bi bi-person-plus-fill" style="color: #3b82f6;"></i>
                <a href="/Contacts/Create">Thêm khách hàng mới</a>
            </div>
            <div class="la-action-item">
                <i class="bi bi-bag-plus-fill" style="color: #10b981;"></i>
                <a href="/Orders/Create">Tạo đơn hàng</a>
            </div>
            <div class="la-action-item">
                <i class="bi bi-file-earmark-plus-fill" style="color: #f59e0b;"></i>
                <a href="/Contracts/Create">Tạo hợp đồng</a>
            </div>
            <div class="la-action-item">
                <i class="bi bi-cash-stack" style="color: #ef4444;"></i>
                <a href="/Payments">Xử lý thanh toán</a>
            </div>
        </div>
    </div>

    <!-- Alerts & Notifications -->
    <div class="la-card">
        <div class="la-card-title">
            <i class="bi bi-bell-fill" style="color: var(--la-gold);"></i>
            Cảnh báo & Thông báo
        </div>
        <div class="la-card-subtitle">Các thông báo quan trọng cần xử lý</div>

        <div class="la-alert-item la-alert-danger">
            <i class="bi bi-clock-history"></i>
            <div>
                <div class="la-alert-title">5 tên miền sắp hết hạn</div>
                <div class="la-alert-desc">Cần gia hạn trong 30 ngày tới</div>
            </div>
        </div>

        <div class="la-alert-item la-alert-warning">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <div>
                <div class="la-alert-title">3 hosting đã hết hạn</div>
                <div class="la-alert-desc">Cần xử lý ngay</div>
            </div>
        </div>

        <div class="la-alert-item la-alert-info">
            <i class="bi bi-wallet-fill"></i>
            <div>
                <div class="la-alert-title">12 đơn hàng chờ thanh toán</div>
                <div class="la-alert-desc">Cần theo dõi</div>
            </div>
        </div>
    </div>
</div>